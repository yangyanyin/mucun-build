(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["passport"],{"0034":function(t,s,e){},"12ae":function(t,s,e){t.exports=e.p+"img/loading.e0ada987.gif"},"185b":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"loading"},[i("img",{attrs:{src:e("12ae")}}),i("p",[t._v("正在加载中，请稍候...")])])}],a=(e("7ccc"),e("2877")),l={},r=Object(a["a"])(l,i,n,!1,null,"b606b668",null);s["a"]=r.exports},"2e7b":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("Layout",[t.loadingSuccess?i("div",{staticClass:"passport"},[i("div",{staticClass:"scroll"},[i("div",{staticClass:"passport-list"},[i("div",{staticClass:"wap-img"},[i("ul",[i("li"),t._l(t.passportList,function(s,e){return i("li",{key:e,class:{on:e===t.countryIndex}},[i("div",{staticClass:"img",on:{click:function(s){return t.switchCountry(e)}}},[i("span",[i("img",{attrs:{src:s.passport_img}})]),i("h3",[t._v(t._s(s.name))])])])})],2)]),i("ul",{staticClass:"clearfix"},[i("li",{staticClass:"filter-li"},[i("span",{on:{click:function(s){return t.showAllFilter()}}},[t._v("\n              显示全部\n              "),i("em",{class:{open:t.filterResult.length>0}})]),i("span",{staticClass:"on",on:{click:function(s){return s.stopPropagation(),t.showFilter(!0)}}},[t._v("\n              筛选\n              "),i("div",{staticClass:"filter",class:{show:t.showFilterType}},[i("div",{staticClass:"close",on:{click:function(s){return s.stopPropagation(),t.showFilter(!1)}}},[i("img",{attrs:{src:e("3f70")}})]),i("h2",[t._v("筛选")]),i("div",{staticClass:"sc"},[i("h3",{on:{click:function(s){return t.showAllFilter()}}},[t._v("\n                    显示全部\n                    "),i("em",{class:{open:t.filterResult.length>0}})]),t._l(t.filterType,function(s,e,n){return i("p",{key:n,on:{click:function(s){return t.filterClick(e)}}},[i("i",{class:{set:t.filterResult.indexOf(e)>=0}}),t._v("\n                    "+t._s(e)+"\n                  ")])})],2)])])]),t._l(t.passportList,function(s,e){return i("li",{key:e,class:{show:e===t.countryIndex}},[i("div",{staticClass:"img web-img",on:{click:function(s){return t.switchCountry(e)}}},[i("span",[i("img",{attrs:{src:s.passport_img}})]),i("h3",[t._v(t._s(s.name))])]),i("div",{staticClass:"clearfix info"},[i("strong",{staticClass:"name"},[t._v(t._s(s.name))]),i("div",{staticClass:"left country"},[i("strong",[t._v(t._s(s.visa_free_number))]),i("i",[t._v("免签")])]),i("div",{staticClass:"left"},[i("strong",[t._v(t._s(s.rank))]),i("i",[t._v("排名")])])])])})],2)]),t.allCountry?i("div",{staticClass:"visa-country clearfix"},[i("div",{staticClass:"country-flag left"},t._l(t.newData||t.allCountry,function(s,e,n){return i("ul",{key:n,ref:"visa_country",refInFor:!0,staticClass:"clearfix",attrs:{index:n}},[i("li",{staticClass:"fixed"},[i("img",{attrs:{src:s.flag}}),t._v("\n              "+t._s(e)+"\n            ")])])}),0),i("div",{staticClass:"visa left"},t._l(t.newData||t.allCountry,function(s,e,n){return i("ul",{key:n,ref:"visa_country",refInFor:!0,staticClass:"clearfix"},[t._l(s,function(s,e,n){return["flag"!==e?i("li",{key:n,class:t.countryClass(s),attrs:{index:t.filterResult.indexOf(s)}},[t._v(t._s(s||"N/A"))]):t._e()]})],2)}),0)]):t._e()])]):i("loadingPage")],1)},n=[],a=(e("7f7f"),e("08cd")),l=e("b21a"),r=e("185b"),o={name:"app",components:{Layout:a["a"],loadingPage:r["a"]},data:function(){return{passportList:"",loadingSuccess:!1,allCountry:{},filterType:{},filterResult:[],newData:"",countryIndex:0,showFilterType:!1}},watch:{filterResult:function(){var t=this;setTimeout(function(){if(t.filterResult.length>0)for(var s in t.newData={},t.allCountry)for(var e=0;e<t.filterResult.length;e++)JSON.stringify(t.allCountry[s]).indexOf(t.filterResult[e])>=0&&(t.newData[s]=t.allCountry[s])},100)}},methods:{countryClass:function(t){var s;return t&&(t.indexOf("签证入境")>=0?s="type1":t.indexOf("落地签入境")>=0||t.indexOf("电子签证")>=0?s="type2":t.indexOf("免签目的国")>=0?s="type3":(t.indexOf("eVisa")>=0||t.indexOf("旅行")>=0||t.indexOf("enrolment")>=0||t.indexOf("tourist")>=0||t.indexOf("预注册")>=0)&&(s="type4")),s},showAllFilter:function(){this.newData="",this.filterResult=[]},filterClick:function(t){for(var s=0;s<this.filterResult.length;s++)if(this.filterResult[s]===t)return this.filterResult.splice(s,1),void(0===this.filterResult.length&&this.showAllFilter());this.filterResult.push(t)},getData:function(){var t=this;this.$http({method:"get",url:"https://cms.aicassets.com/v1/passportsInfo"}).then(function(s){200===s.data.code&&(localStorage.setItem("passportAll",JSON.stringify(s.data.data)),t.passportList=s.data.data,t.switchCountry("wap"===Object(l["b"])()?0:"-1"),t.loadingSuccess=!0,setTimeout(function(){var t=document.documentElement.scrollTop||document.body.scrollTop;Object(l["a"])(t),Object(l["c"])()},10))})},switchCountry:function(t){this.allCountry={},this.filterType={};var s=JSON.parse(localStorage.getItem("passportAll"));t>=0&&"wap"===Object(l["b"])()&&(this.countryIndex=t,s=JSON.parse(localStorage.getItem("passportAll")).splice(t,1));for(var e=0;e<s.length;e++)if(s[e].visa_countries)for(var i=0;i<s[e].visa_countries.length;i++)(s[e].visa_countries[i].type.indexOf("落地签入境")>=0||s[e].visa_countries[i].type.indexOf("免签目的国")>=0)&&(this.allCountry[s[e].visa_countries[i].name]={},this.filterType[s[e].visa_countries[i].type]="");for(var n in this.allCountry)for(var a=0;a<s.length;a++)if(s[a].visa_countries)for(var r=0;r<s[a].visa_countries.length;r++)this.allCountry[n][s[a].name]="";for(var o in this.allCountry)for(var c in this.allCountry[o])for(var u=0;u<s.length;u++)if(s[u].visa_countries)for(var f=0;f<s[u].visa_countries.length;f++)o===s[u].visa_countries[f].name&&(this.allCountry[o].flag=s[u].visa_countries[f].flag,s[u].name===c&&(s[u].visa_countries[f].type.indexOf("落地签入境")>=0||s[u].visa_countries[f].type.indexOf("免签目的国")>=0)&&(this.allCountry[o][c]=s[u].visa_countries[f].type))},showFilter:function(t){"wap"===Object(l["b"])()&&(this.showFilterType=t)}},mounted:function(){this.getData(),window.addEventListener("scroll",function(){var t=document.getElementsByClassName("country-flag")[0];if(t){var s=document.documentElement.scrollTop||document.body.scrollTop;t.style.top=285-s+"px"}var e=document.getElementsByClassName("filter-li")[0];if(e&&"wap"!==Object(l["b"])()){var i=document.documentElement.scrollTop||document.body.scrollTop;e.style.top=180-i+"px"}})}},c=o,u=(e("fe58"),e("2877")),f=Object(u["a"])(c,i,n,!1,null,"fc20e7c8",null);s["default"]=f.exports},"3f70":function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAG1BMVEUAAABmZmZmZmZlZWViYmJlZWVmZmZoaGhmZmbfeiy0AAAACHRSTlMAf/dnE79GNmt1TNkAAADHSURBVEjH3ZUxDsIwDEVBgj1i6orEHWBEnIA7cAnWqlL1j93FVYfX6O3NZP/ar21iO6fjrN97T708V+ua+17ALd+y/knj83Myl/lKRgYMyVTmJ0kjIHlsNhFDZcFBEj3mlAsAfAAgIAEK4iExHBoBEAGASsAmAwAEAEAAAETFdRF9QCEK0EcUoI8AAAgAgGgeoK/wj9Tf9I3SrfbD0uP2gtGS86LVsvfG0dbz5tX29wGiI8iHmI5BHaQ6inWY63WgF4peSYdZCxgmtF0+JawYAAAAAElFTkSuQmCC"},4280:function(t,s,e){},"7ccc":function(t,s,e){"use strict";var i=e("0034"),n=e.n(i);n.a},fe58:function(t,s,e){"use strict";var i=e("4280"),n=e.n(i);n.a}}]);
//# sourceMappingURL=passport.b65b0092.js.map