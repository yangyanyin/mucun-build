(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["passport"],{"12ae":function(t,s,e){t.exports=e.p+"img/loading.e0ada987.gif"},"185b":function(t,s,e){"use strict";var n=function(){var t=this,s=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"loading"},[n("img",{attrs:{src:e("12ae")}}),n("p",[t._v("正在加载中，请稍候...")])])}],a=(e("e87f"),e("2877")),l={},r=Object(a["a"])(l,n,i,!1,null,"bb3d2c08",null);s["a"]=r.exports},"2e7b":function(t,s,e){"use strict";e.r(s);var n=function(){var t=this,s=t.$createElement,n=t._self._c||s;return t.loadingSuccess?n("div",{staticClass:"passport"},[n("div",{staticClass:"scroll"},[n("div",{staticClass:"passport-list"},[n("div",{staticClass:"wap-img"},[n("ul",[n("li"),t._l(t.passportList,function(s,e){return n("li",{key:e,class:{on:e===t.countryIndex}},[n("div",{staticClass:"img",on:{click:function(s){return t.switchCountry(e)}}},[n("span",[n("img",{attrs:{src:s.passport_img}})]),n("h3",[t._v(t._s(s.name))])])])})],2)]),n("ul",{staticClass:"clearfix"},[n("li",{staticClass:"filter-li"},[n("span",{on:{click:function(s){return t.showAllFilter()}}},[t._v("\n            显示全部\n            "),n("em",{class:{open:t.filterResult.length>0}})]),n("span",{staticClass:"on",on:{click:function(s){return s.stopPropagation(),t.showFilter(!0)}}},[t._v("\n            筛选\n            "),n("div",{staticClass:"filter",class:{show:t.showFilterType}},[n("div",{staticClass:"close",on:{click:function(s){return s.stopPropagation(),t.showFilter(!1)}}},[n("img",{attrs:{src:e("3f70")}})]),n("h2",[t._v("筛选")]),n("div",{staticClass:"sc"},[n("h3",{on:{click:function(s){return t.showAllFilter()}}},[t._v("\n                  显示全部\n                  "),n("em",{class:{open:t.filterResult.length>0}})]),t._l(t.filterType,function(s,e,i){return n("p",{key:i,on:{click:function(s){return t.filterClick(e)}}},[n("i",{class:{set:t.filterResult.indexOf(e)>=0}}),t._v("\n                  "+t._s(e)+"\n                ")])})],2)])])]),t._l(t.passportList,function(s,e){return n("li",{key:e,class:{show:e===t.countryIndex}},[n("div",{staticClass:"img web-img",on:{click:function(s){return t.switchCountry(e)}}},[n("span",[n("img",{attrs:{src:s.passport_img}})]),n("h3",[t._v(t._s(s.name))])]),n("div",{staticClass:"clearfix info"},[n("strong",{staticClass:"name"},[t._v(t._s(s.name))]),n("div",{staticClass:"left country"},[n("strong",[t._v(t._s(s.visa_free_number))]),n("i",[t._v("免签")])]),n("div",{staticClass:"left"},[n("strong",[t._v(t._s(s.rank))]),n("i",[t._v("排名")])])])])})],2)]),t.allCountry?n("div",{staticClass:"visa-country clearfix"},[n("div",{staticClass:"country-flag left"},t._l(t.newData||t.allCountry,function(s,e,i){return n("ul",{key:i,ref:"visa_country",refInFor:!0,staticClass:"clearfix",attrs:{index:i}},[n("li",{staticClass:"fixed"},[n("img",{attrs:{src:s.flag}}),t._v("\n            "+t._s(e)+"\n          ")])])}),0),n("div",{staticClass:"visa left"},t._l(t.newData||t.allCountry,function(s,e,i){return n("ul",{key:i,ref:"visa_country",refInFor:!0,staticClass:"clearfix"},[t._l(s,function(s,e,i){return["flag"!==e?n("li",{key:i,class:t.countryClass(s),attrs:{index:t.filterResult.indexOf(s)}},[t._v(t._s(s||"N/A"))]):t._e()]})],2)}),0)]):t._e()])]):n("loadingPage")},i=[],a=(e("7f7f"),e("b21a")),l=e("185b"),r={components:{loadingPage:l["a"]},data:function(){return{passportList:"",loadingSuccess:!1,allCountry:{},filterType:{},filterResult:[],newData:"",countryIndex:0,showFilterType:!1}},watch:{filterResult:function(){var t=this;setTimeout(function(){if(t.filterResult.length>0)for(var s in t.newData={},t.allCountry)for(var e=0;e<t.filterResult.length;e++)JSON.stringify(t.allCountry[s]).indexOf(t.filterResult[e])>=0&&(t.newData[s]=t.allCountry[s])},100)}},methods:{countryClass:function(t){var s;return t&&(t.indexOf("签证入境")>=0?s="type1":t.indexOf("落地签入境")>=0||t.indexOf("电子签证")>=0?s="type2":t.indexOf("免签目的国")>=0?s="type3":(t.indexOf("eVisa")>=0||t.indexOf("旅行")>=0||t.indexOf("enrolment")>=0||t.indexOf("tourist")>=0||t.indexOf("预注册")>=0)&&(s="type4")),s},showAllFilter:function(){this.newData="",this.filterResult=[]},filterClick:function(t){for(var s=0;s<this.filterResult.length;s++)if(this.filterResult[s]===t)return this.filterResult.splice(s,1),void(0===this.filterResult.length&&this.showAllFilter());this.filterResult.push(t)},getData:function(){var t=this;this.$http({method:"get",url:"https://cms.aicassets.com/v1/passportsInfo"}).then(function(s){200===s.data.code&&(localStorage.setItem("passportAll",JSON.stringify(s.data.data)),t.passportList=s.data.data,t.switchCountry("wap"===Object(a["b"])()?0:"-1"),t.loadingSuccess=!0,setTimeout(function(){var t=document.documentElement.scrollTop||document.body.scrollTop;Object(a["a"])(t),Object(a["c"])()},10))})},switchCountry:function(t){this.allCountry={},this.filterType={};var s=JSON.parse(localStorage.getItem("passportAll"));t>=0&&"wap"===Object(a["b"])()&&(this.countryIndex=t,s=JSON.parse(localStorage.getItem("passportAll")).splice(t,1));for(var e=0;e<s.length;e++)if(s[e].visa_countries)for(var n=0;n<s[e].visa_countries.length;n++)(s[e].visa_countries[n].type.indexOf("落地签入境")>=0||s[e].visa_countries[n].type.indexOf("免签目的国")>=0)&&(this.allCountry[s[e].visa_countries[n].name]={},this.filterType[s[e].visa_countries[n].type]="");for(var i in this.allCountry)for(var l=0;l<s.length;l++)if(s[l].visa_countries)for(var r=0;r<s[l].visa_countries.length;r++)this.allCountry[i][s[l].name]="";for(var o in this.allCountry)for(var c in this.allCountry[o])for(var u=0;u<s.length;u++)if(s[u].visa_countries)for(var f=0;f<s[u].visa_countries.length;f++)o===s[u].visa_countries[f].name&&(this.allCountry[o].flag=s[u].visa_countries[f].flag,s[u].name===c&&(s[u].visa_countries[f].type.indexOf("落地签入境")>=0||s[u].visa_countries[f].type.indexOf("免签目的国")>=0)&&(this.allCountry[o][c]=s[u].visa_countries[f].type))},showFilter:function(t){"wap"===Object(a["b"])()&&(this.showFilterType=t)}},mounted:function(){this.getData(),window.addEventListener("scroll",function(){var t=document.getElementsByClassName("country-flag")[0];if(t){var s=document.documentElement.scrollTop||document.body.scrollTop;t.style.top=285-s+"px"}var e=document.getElementsByClassName("filter-li")[0];if(e&&"wap"!==Object(a["b"])()){var n=document.documentElement.scrollTop||document.body.scrollTop;e.style.top=180-n+"px"}})}},o=r,c=(e("7c01"),e("2877")),u=Object(c["a"])(o,n,i,!1,null,"1123d132",null);s["default"]=u.exports},"4dce":function(t,s,e){},"5c11":function(t,s,e){},"7c01":function(t,s,e){"use strict";var n=e("5c11"),i=e.n(n);i.a},b21a:function(t,s,e){"use strict";e.d(s,"b",function(){return n}),e.d(s,"a",function(){return i}),e.d(s,"c",function(){return a});var n=function(){var t=document.getElementsByTagName("body")[0].clientWidth;return t>767?"web":"wap"},i=function(t){for(var s=document.getElementsByClassName("animation-show"),e=0;e<s.length;e++)t+window.innerHeight>=s[e].offsetTop+120?s[e].classList.add("show"):s[e].classList.remove("show")},a=function(){window.addEventListener("scroll",function(){var t=document.documentElement.scrollTop||document.body.scrollTop;i(t)})}},e87f:function(t,s,e){"use strict";var n=e("4dce"),i=e.n(n);i.a}}]);
//# sourceMappingURL=passport.4aa244c9.js.map